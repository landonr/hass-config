- id: '1627277621640'
  alias: scene rotation
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.shortcut_button_red_action
    to: 'on'
    id: red
  - platform: state
    entity_id:
    - sensor.shortcut_button_red_action
    to: brightness_move_up
    id: redHold
  condition:
  - condition: not
    conditions:
    - condition: and
      conditions:
      - condition: or
        conditions:
        - condition: trigger
          id: white
        - condition: trigger
          id: whiteHold
      - condition: state
        entity_id: input_boolean.living_room_guest
        state: 'on'
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: trigger
          id: red
        - condition: trigger
          id: white
      sequence:
      - service: script.s
        data: {}
      - delay:
          hours: 0
          minutes: 0
          seconds: 0
          milliseconds: 100
    - conditions:
      - condition: or
        conditions:
        - condition: trigger
          id: redHold
        - condition: trigger
          id: whiteHold
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.lr_scene_transition
        data:
          option: 'True'
      - service: script.warm
        data: {}
      - service: input_select.select_option
        target:
          entity_id: input_select.lr_scene_transition
        data:
          option: 'False'
    default: []
  mode: single
- id: '1630528997823'
  alias: Restart HA
  trigger:
    platform: time
    at: 02:00:00
  condition:
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
    - sat
    - sun
  action:
  - service: homeassistant.restart
- id: '1637538466262'
  alias: entrance switch off
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.entrance_switch_action
    to: 'off'
  condition: []
  action:
  - service: media_player.volume_mute
    data:
      is_volume_muted: false
    target:
      entity_id: media_player.kitchen
  - service: media_player.play_media
    data:
      media_content_id: media-source://tts/cloud?message=A huevo
      media_content_type: music
      extra:
        volume: 40
    target:
      entity_id:
      - media_player.kitchen_tts
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: script.off_a
    data: {}
  mode: single
- id: '1637538486735'
  alias: entrance switch on
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: 240990b76a7fbc7ee22303339c4b5898
    type: action
    subtype: 'on'
    discovery_id: 0x000d6ffffe78f426 action_on
  condition: []
  action:
  - service: script.warm
    data: {}
  mode: single
- id: '1637538659028'
  alias: entrance switch hold on
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: 240990b76a7fbc7ee22303339c4b5898
    type: action
    subtype: brightness_move_up
    discovery_id: 0x000d6ffffe78f426 action_brightness_move_up
  condition: []
  action:
  - service: script.sonos_daily_mix
  - device_id: 78aff54aa2682891f186bd78be63560e
    domain: light
    entity_id: light.tv_lamp_small
    type: flash
  - service: media_player.shuffle_set
    target:
      device_id: 90e98d1ecee56bc8a850ac059eb531d3
    data:
      shuffle: true
  - service: media_player.media_next_track
    target:
      device_id: 90e98d1ecee56bc8a850ac059eb531d3
  - scene: scene.warm
  mode: single
- id: '1641403990493'
  alias: Low battery level detection & notification for all battery sensors
  description: ''
  use_blueprint:
    path: sbyx/low-battery-level-detection-notification-for-all-battery-sensors.yaml
    input:
      actions:
      - service: persistent_notification.create
        data:
          message: 'Low battery warning for: {{sensors}}'
      threshold: 25
- id: '1641404059535'
  alias: Low humidity level detection & notification for miflora sensors
  description: ''
  use_blueprint:
    path: VincenzoMaletta/low-humidity-detection-notification-for-miflora-sensors.yaml
    input:
      actions:
      - service: persistent_notification.create
        data:
          message: 'Low moisture warning for: {{sensors}}'
      threshold: 33
- id: '1645344611834'
  alias: Bathroom motion
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.motion_sensor_occupancy
    id: motion
  - platform: state
    entity_id: timer.fountain_timer
    id: timer
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.motion_sensor_occupancy
        state: 'on'
      sequence:
      - choose:
        - conditions:
          - condition: and
            conditions:
            - condition: device
              device_id: 90e98d1ecee56bc8a850ac059eb531d3
              domain: media_player
              entity_id: media_player.beam
              type: is_playing
            - condition: state
              entity_id: media_player.beam
              attribute: media_content_type
              state: music
            - condition: not
              conditions:
              - condition: device
                device_id: 957d7ad9526a360f8ae9894d06373558
                domain: media_player
                entity_id: media_player.office_tts
                type: is_playing
            - condition: not
              conditions:
              - condition: state
                entity_id: media_player.beam
                attribute: source
                state: TV
          sequence:
          - service: media_player.join
            data:
              group_members:
              - media_player.office
            target:
              entity_id: media_player.beam
          - service: media_player.volume_set
            data:
              volume_level: 0.5
            target:
              entity_id: media_player.office
    default: []
  mode: single
- id: '1645374378273'
  alias: Bathroom switch timer
  description: ''
  trigger:
  - platform: state
    entity_id: timer.fountain_timer
    to: idle
    id: 'off'
  - platform: state
    entity_id: timer.fountain_timer
    to: finished
    id: 'off'
  - type: motion
    platform: device
    device_id: 47b501bc7ef52dcd2c6786085fd2c9f8
    entity_id: binary_sensor.motion_sensor_occupancy
    domain: binary_sensor
    id: 'on'
  - platform: device
    type: turned_off
    device_id: 3fe773b6b8b4967e2ef4677d7c72a1bb
    entity_id: switch.bathroom_switch
    domain: switch
    id: 'off'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: not
          conditions:
          - condition: state
            entity_id: timer.fountain_timer
            state: running
        - condition: trigger
          id: 'on'
      - type: is_motion
        condition: device
        device_id: 47b501bc7ef52dcd2c6786085fd2c9f8
        entity_id: binary_sensor.motion_sensor_occupancy
        domain: binary_sensor
      sequence:
      - service: timer.start
        data: {}
        target:
          entity_id: timer.fountain_timer
    default: []
  - choose:
    - conditions:
      - condition: state
        entity_id: timer.fountain_timer
        state: active
      - condition: trigger
        id: 'on'
      sequence:
      - choose:
        - conditions:
          - type: is_motion
            condition: device
            device_id: 47b501bc7ef52dcd2c6786085fd2c9f8
            entity_id: binary_sensor.motion_sensor_occupancy
            domain: binary_sensor
          sequence:
          - service: timer.start
            data: {}
            target:
              entity_id: timer.fountain_timer
      - choose:
        - conditions:
          - condition: trigger
            id: 'on'
          - condition: or
            conditions:
            - condition: time
              before: '22:00:00'
              after: 07:00:00
              weekday:
              - mon
              - tue
              - wed
              - thu
              - fri
              - sat
              - sun
            - condition: and
              conditions:
              - condition: state
                entity_id: light.all_lights
                state: 'on'
              - condition: not
                conditions:
                - condition: state
                  entity_id: input_select.lr_scene
                  state: hell
          sequence:
          - service: switch.turn_on
            data: {}
            target:
              entity_id: switch.bathroom_switch
        default: []
    default:
    - choose:
      - conditions:
        - condition: trigger
          id: 'off'
        - type: is_no_motion
          condition: device
          device_id: 47b501bc7ef52dcd2c6786085fd2c9f8
          entity_id: binary_sensor.motion_sensor_occupancy
          domain: binary_sensor
        sequence:
        - service: switch.turn_off
          data: {}
          target:
            entity_id:
            - switch.bathroom_switch
  - delay:
      hours: 0
      minutes: 0
      seconds: 0
      milliseconds: 500
  mode: single
- id: '1646872845872'
  alias: Music Remote
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.music_remote_action
    to: arrow_left_hold
    id: left_hold
  - platform: state
    entity_id: sensor.music_remote_action
    to: arrow_right_hold
    id: right_hold
  - platform: state
    entity_id: sensor.music_remote_action
    to: brightness_down_hold
    id: down_hold
  - platform: state
    entity_id: sensor.music_remote_action
    to: brightness_down_release
    id: down_hold_release
  - platform: state
    entity_id: sensor.music_remote_action
    to: brightness_up_hold
    id: up_hold
  - platform: state
    entity_id: sensor.music_remote_action
    to: brightness_up_release
    id: up_hold
  - platform: state
    entity_id: sensor.music_remote_action
    to: arrow_left_click
    id: left_click
  - platform: state
    entity_id: sensor.music_remote_action
    to: arrow_right_click
    id: right_click
  - platform: state
    entity_id: sensor.music_remote_action
    to: brightness_down_click
    id: down_click
  - platform: state
    entity_id: sensor.music_remote_action
    to: brightness_up_click
    id: up_click
  - platform: state
    entity_id: sensor.music_remote_action
    to: toggle
    id: toggle
  - platform: state
    entity_id: switch.tt_pause
    id: toggle
    to: 'on'
  - platform: state
    entity_id: switch.tt_volume_up
    to: 'on'
    id: up_click
  - platform: state
    entity_id: switch.tt_volume_down
    to: 'on'
    id: down_click
  - platform: state
    entity_id: switch.tt_next_track
    to: 'on'
    id: right_click
  - platform: state
    entity_id: switch.tt_shuffle_on
    to: 'on'
    id: shuffle_on
  - platform: state
    entity_id: switch.tt_shuffle_off
    to: 'on'
    id: shuffle_off
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: left_hold
      sequence:
      - service: script.sonos_daily_mix
        data: {}
    - conditions:
      - condition: trigger
        id: right_hold
      sequence:
      - service: script.sonos_r
        data: {}
    - conditions:
      - condition: trigger
        id: toggle
      sequence:
      - choose:
        - conditions:
          - condition: device
            device_id: 90e98d1ecee56bc8a850ac059eb531d3
            domain: media_player
            entity_id: media_player.beam
            type: is_playing
          sequence:
          - service: media_player.media_play_pause
            target:
              entity_id: media_player.beam
            data: {}
        - conditions:
          - condition: device
            device_id: 63b5451979abbfec3201ab24592e6900
            domain: media_player
            entity_id: media_player.bedroom
            type: is_playing
          sequence:
          - service: media_player.media_play_pause
            target:
              entity_id: media_player.kitchen
            data: {}
        - conditions:
          - condition: device
            device_id: 957d7ad9526a360f8ae9894d06373558
            domain: media_player
            entity_id: media_player.kitchen
            type: is_playing
          sequence:
          - service: media_player.media_play_pause
            target:
              entity_id: media_player.kitchen
            data: {}
        - conditions:
          - condition: device
            device_id: b2031546510b1ac0a601400cf695f550
            domain: media_player
            entity_id: media_player.55_tcl_roku_tv
            type: is_paused
          sequence:
          - service: media_player.media_play_pause
            target:
              entity_id: media_player.55_tcl_roku_tv
            data: {}
        - conditions:
          - condition: device
            device_id: b2031546510b1ac0a601400cf695f550
            domain: media_player
            entity_id: media_player.55_tcl_roku_tv
            type: is_playing
          sequence:
          - service: media_player.media_play_pause
            target:
              entity_id: media_player.55_tcl_roku_tv
            data: {}
        default:
        - service: media_player.media_play_pause
          data: {}
          target:
            entity_id: media_player.beam
    - conditions:
      - condition: trigger
        id: right_click
      sequence:
      - service: media_player.media_next_track
        target:
          device_id:
          - 90e98d1ecee56bc8a850ac059eb531d3
        data: {}
    - conditions:
      - condition: trigger
        id: up_click
      sequence:
      - service: script.volume_up_sonos
        data: {}
    - conditions:
      - condition: trigger
        id: up_hold
      sequence:
      - repeat:
          until:
          - condition: trigger
            id: up_hold
          sequence:
          - service: script.sonos_volume
            data: {}
          - delay:
              hours: 0
              minutes: 0
              seconds: 0
              milliseconds: 100
    - conditions:
      - condition: trigger
        id: down_click
      sequence:
      - service: script.volume_down_sonos
        data: {}
    - conditions:
      - condition: trigger
        id: down_hold
      sequence:
      - service: media_player.volume_down
        data: {}
        target:
          entity_id:
          - media_player.beam
          - media_player.kitchen
          - media_player.bedroom
    - conditions:
      - condition: trigger
        id: shuffle_on
      sequence:
      - service: media_player.shuffle_set
        data:
          shuffle: true
        target:
          entity_id: media_player.beam
    - conditions:
      - condition: trigger
        id: shuffle_off
      sequence:
      - service: media_player.shuffle_set
        data:
          shuffle: false
        target:
          entity_id: media_player.beam
    default: []
  mode: single
- id: '1647109808165'
  alias: Light Remote
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.light_remote_action
    to: arrow_left_hold
    id: left_hold
  - platform: state
    entity_id: sensor.light_remote_action
    to: arrow_right_hold
    id: right_hold
  - platform: state
    entity_id: sensor.light_remote_action
    to: brightness_down_hold
    id: down_hold
  - platform: state
    entity_id: sensor.light_remote_action
    to: brightness_move_up
    id: up_hold
  - platform: state
    entity_id: sensor.light_remote_action
    to: arrow_left_click
    id: left_click
  - platform: state
    entity_id: sensor.light_remote_action
    to: arrow_right_click
    id: right_click
  - platform: state
    entity_id: sensor.light_remote_action
    to: 'off'
    id: down_click
  - platform: state
    entity_id: sensor.light_remote_action
    to: 'on'
    id: up_click
  - platform: state
    entity_id: sensor.light_remote_action
    to: brightness_stop
    id: brightness_stop
  condition: []
  action:
  - service: switch.turn_off
    data: {}
    target:
      entity_id: switch.adaptive_lighting_default
  - choose:
    - conditions:
      - condition: trigger
        id: left_hold
      sequence: []
    - conditions:
      - condition: trigger
        id: right_hold
      sequence: []
    - conditions:
      - condition: trigger
        id: right_click
      sequence:
      - service: script.s
        data: {}
    - conditions:
      - condition: trigger
        id: left_click
      sequence: []
    - conditions:
      - condition: or
        conditions:
        - condition: trigger
          id: brightness_stop
        - condition: trigger
          id: brightness_stop
      sequence: []
    - conditions:
      - condition: trigger
        id: down_click
      sequence:
      - choose:
        - conditions:
          - condition: template
            value_template: "{{ state_attr(\"light.all_brightness_lights\", \"brightness\")\n
              \                     / 255 > 0.75 }}"
          sequence:
          - service: light.turn_on
            data:
              brightness_step_pct: -25
            target:
              entity_id: light.all_brightness_lights
        default:
        - service: light.turn_on
          data:
            brightness_step_pct: -25
          target:
            entity_id: light.all_brightness_lights
        - service: light.turn_off
          data: {}
          target:
            entity_id: light.all_switch_lights
    - conditions:
      - condition: trigger
        id: up_click
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: light.all_lights
            state: 'off'
          sequence:
          - service: input_select.select_option
            data:
              option: warm
            target:
              entity_id: input_select.lr_scene
          - service: light.turn_on
            data:
              brightness_pct: 25
              color_temp: 500
            target:
              entity_id: light.all_brightness_lights
        - conditions:
          - condition: template
            value_template: '{{ state_attr("light.all_brightness_lights", "brightness")
              / 255 > 0.3 }}'
          sequence:
          - service: light.turn_on
            data:
              brightness_step_pct: 25
            target:
              entity_id:
              - light.all_lights
              - light.all_brightness_lights
          - service: light.turn_on
            data: {}
            target:
              entity_id: light.all_switch_lights
        default:
        - service: light.turn_on
          data:
            brightness_step_pct: 25
          target:
            entity_id:
            - light.all_brightness_lights
    - conditions:
      - condition: trigger
        id: down_hold
      sequence: []
    default: []
  mode: single
- id: '1647546639141'
  alias: Desk Height Light Color
  description: ''
  trigger:
  - platform: state
    entity_id: button.desk_get_position
  - platform: state
    entity_id: number.desk_height_cm
  condition:
  - condition: device
    type: is_on
    device_id: 927156e4fca9985aa8780ecb445a651a
    entity_id: light.office_lamp
    domain: light
  action:
  - service: light.turn_on
    data:
      transition: 0.1
      hs_color: '{{ states.sensor.desk_light_hue_saturation.state }}

        '
    target:
      entity_id: light.rgb_lights
  - delay:
      hours: 0
      minutes: 0
      seconds: 0
      milliseconds: 200
  mode: single
- id: '1648321605986'
  alias: Sonos Group Volume
  description: ''
  trigger:
  - platform: state
    entity_id: media_player.beam
    attribute: volume_level
  condition:
  - condition: template
    value_template: '{{ state_attr("media_player.beam", "sonos_group") | length >
      1 }}'
  action:
  - service: media_player.volume_set
    data:
      volume_level: '{{ state_attr("media_player.beam", "volume_level") }}

        '
    target:
      entity_id:
      - media_player.bedroom
      - media_player.kitchen
  mode: single
- id: '1648336726982'
  alias: Chore Complete
  description: Triggered when a chore is finished, checks it off in grocy
  trigger:
  - platform: state
    entity_id:
    - input_select.dishwasher_state_machine
    to: job_completed
    id: dishwasher
  - platform: state
    entity_id:
    - input_select.washing_machine_state_machine
    to: job_completed
    id: washingmachine
  - platform: device
    domain: mqtt
    device_id: fa4932847dd31aefa0be604b7dff588b
    type: action
    subtype: 'on'
    discovery_id: 0x8cf681fffe32e982 action_on
    id: litter
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: dishwasher
      sequence:
      - service: notify.mobile_app_landorghini13
        data:
          message: Dishwasher Done!
      - choose:
        - conditions:
          - condition: device
            device_id: 90e98d1ecee56bc8a850ac059eb531d3
            domain: media_player
            entity_id: media_player.beam
            type: is_playing
          sequence:
          - service: media_player.play_media
            data:
              media_content_id: media-source://tts/cloud?message=Dishwasher done
              media_content_type: music
              extra:
                volume: 40
            target:
              entity_id:
              - media_player.beam_tts
      - service: grocy.execute_chore
        data:
          chore_id: '5'
          done_by: '2'
          skipped: false
    - conditions:
      - condition: trigger
        id: washingmachine
      sequence:
      - service: notify.mobile_app_landorghini13
        data:
          message: Washing Machine Done!
      - choose:
        - conditions:
          - condition: device
            device_id: 90e98d1ecee56bc8a850ac059eb531d3
            domain: media_player
            entity_id: media_player.beam
            type: is_playing
          sequence:
          - service: media_player.play_media
            data:
              media_content_id: media-source://tts/cloud?message=Washing Machine done
              media_content_type: music
              extra:
                volume: 40
            target:
              entity_id:
              - media_player.beam_tts
      - service: grocy.execute_chore
        data:
          chore_id: '4'
          done_by: '2'
          skipped: false
    - conditions:
      - condition: trigger
        id: litter
      sequence:
      - service: media_player.play_media
        data:
          media_content_id: media-source://tts/cloud?message=Litter Cleaned
          media_content_type: music
          extra:
            volume: 40
        target:
          entity_id:
          - media_player.bedroom_tts
      - service: grocy.execute_chore
        data:
          chore_id: '2'
          done_by: '2'
          skipped: false
    default: []
  mode: single
- id: '1651185641225'
  alias: Desk Actions
  description: ''
  trigger:
  - platform: event
    event_type: ios.action_fired
    id: desk_up
    event_data:
      actionName: Desk Up Action
  - platform: event
    event_type: ios.action_fired
    id: desk_down
    event_data:
      actionName: Desk Down Action
  - platform: event
    event_type: ios.action_fired
    id: desk_nudge_up
    event_data:
      actionName: Desk Nudge Up Action
  - platform: event
    event_type: ios.action_fired
    id: desk_nudge_down
    event_data:
      actionName: Desk Nudge Down Action
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: desk_up
      sequence:
      - service: button.press
        data: {}
        target:
          entity_id: button.desk_position_up
    - conditions:
      - condition: trigger
        id: desk_down
      sequence:
      - service: button.press
        data: {}
        target:
          entity_id: button.desk_position_down
    - conditions:
      - condition: trigger
        id: desk_nudge_up
      sequence:
      - service: button.press
        data: {}
        target:
          entity_id: button.desk_position_nudge_up
    - conditions:
      - condition: trigger
        id: desk_nudge_down
      sequence:
      - service: button.press
        data: {}
        target:
          entity_id: button.desk_position_nudge_down
    default: []
  mode: single
- id: '1651685170386'
  alias: Desk Height Grabber
  description: ''
  trigger:
  - platform: state
    entity_id: button.desk_position_down
    id: button
  - platform: state
    entity_id: button.desk_position_up
    id: button
  - platform: state
    entity_id: number.desk_height_cm
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: button
      sequence:
      - delay:
          hours: 0
          minutes: 0
          seconds: 2
          milliseconds: 0
    default:
    - delay:
        hours: 0
        minutes: 0
        seconds: 0
        milliseconds: 200
  - service: button.press
    data: {}
    target:
      entity_id: button.desk_get_position
  mode: single
- id: '1651695284925'
  alias: Webcam Lighting
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.lando_mbp_camera_in_use
    id: 'on'
    to: 'on'
  - platform: state
    entity_id: binary_sensor.lando_mbp_camera_in_use
    id: 'off'
    to: 'off'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: 'on'
      - condition: state
        entity_id: binary_sensor.lando_mbp_camera_in_use
        state: 'on'
      sequence:
      - service: light.turn_on
        data:
          transition: 1
          color_temp: 416
          brightness_pct: 85
        target:
          entity_id: light.office_lamp
      - service: automation.turn_off
        data: {}
        target:
          entity_id: automation.desk_height_hue_lamp
    - conditions:
      - condition: trigger
        id: 'off'
      - condition: state
        entity_id: binary_sensor.lando_mbp_camera_in_use
        state: 'off'
      sequence:
      - service: automation.turn_on
        data: {}
        target:
          entity_id: automation.desk_height_hue_lamp
    default: []
  mode: single
- id: '1653764447343'
  alias: Living Room Guest White Shortcut
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.shortcut_button_white_action
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.living_room_guest
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: light.living_room_lights
        state: 'off'
      sequence:
      - service: light.turn_on
        data:
          color_temp: 500
          brightness_pct: 40
          transition: 1
        target:
          entity_id:
          - light.living_room_lights
          - light.kitchen_counter_lights
    default:
    - service: light.turn_off
      data:
        transition: 1
      target:
        entity_id:
        - light.living_room_lights
        - light.kitchen_counter_lights
  mode: single
- id: '1653782103704'
  alias: Track Lights turn on everything
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.kitchen_track_switch
    to: 'on'
  condition:
  - condition: state
    entity_id: input_select.lr_scene
    state: offScene
  action:
  - service: script.warm
    data: {}
  mode: single
- id: '1658793549886'
  alias: Litter Box Opened
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: f36fb888990eb4bcf83538ced292f38f
    entity_id: binary_sensor.litter_box_bin_contact
    domain: binary_sensor
    for:
      hours: 0
      minutes: 0
      seconds: 5
  condition: []
  action: []
  mode: single
- id: '1659292802583'
  alias: Cat Fountain Timer
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 47b501bc7ef52dcd2c6786085fd2c9f8
    entity_id: binary_sensor.motion_sensor_occupancy
    domain: binary_sensor
  condition: []
  action:
  - choose:
    - conditions:
      - condition: device
        type: is_off
        device_id: 3a1df2c4b76763425057dfb9ade6f663
        entity_id: switch.fountain_switch
        domain: switch
      sequence:
      - type: turn_on
        device_id: 3a1df2c4b76763425057dfb9ade6f663
        entity_id: switch.fountain_switch
        domain: switch
    default: []
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: 3a1df2c4b76763425057dfb9ade6f663
    entity_id: switch.fountain_switch
    domain: switch
  mode: restart
- id: '1660528033725'
  alias: Litter Cleaned
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: fa4932847dd31aefa0be604b7dff588b
    type: action
    subtype: 'on'
    discovery_id: 0x8cf681fffe32e982 action_on
  condition: []
  action:
  - service: media_player.volume_mute
    data:
      is_volume_muted: false
    target:
      entity_id: media_player.bedroom
  - service: media_player.play_media
    data:
      media_content_id: media-source://tts/cloud?message=Litter Cleaned
      media_content_type: music
      extra:
        volume: 40
    target:
      entity_id:
      - media_player.bedroom_tts
  mode: single
- id: '1663439508903'
  alias: Oven Fan Toggle
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.air_quality_oven_fan_trigger
    to: 'False'
    id: 'off'
  - platform: state
    entity_id:
    - sensor.air_quality_oven_fan_trigger
    id: 'on'
    to: 'True'
  - platform: state
    entity_id:
    - sensor.oven_toggle_button_click
    to: 'on'
    id: buttonOn
  - platform: state
    entity_id:
    - sensor.oven_toggle_button_click
    to: 'off'
    id: buttonOff
  condition:
  - condition: or
    conditions:
    - condition: and
      conditions:
      - condition: trigger
        id: 'on'
      - condition: device
        type: is_off
        device_id: f844e99cd89ce7d7e2c6af31fa016cac
        entity_id: switch.oven_fan
        domain: switch
      - condition: device
        type: is_on
        device_id: 79db1244f9fd4d44c9bbe4f785b3a4d9
        entity_id: switch.all_lights
        domain: switch
    - condition: and
      conditions:
      - condition: device
        type: is_on
        device_id: f844e99cd89ce7d7e2c6af31fa016cac
        entity_id: switch.oven_fan
        domain: switch
      - condition: trigger
        id: 'off'
    - condition: trigger
      id: buttonOn
    - condition: trigger
      id: buttonOff
  action:
  - choose:
    - conditions:
      - condition: or
        conditions:
        - condition: trigger
          id: 'on'
        - condition: trigger
          id: buttonOn
      sequence:
      - type: turn_on
        device_id: f844e99cd89ce7d7e2c6af31fa016cac
        entity_id: switch.oven_fan
        domain: switch
      - service: esphome.tdisplayt4_goto_screen
        data:
          screen_name: sensors
      - delay:
          hours: 0
          minutes: 3
          seconds: 0
          milliseconds: 0
      - choose:
        - conditions:
          - condition: not
            conditions:
            - condition: state
              entity_id: sensor.particulate_matter_level
              state: low
          sequence:
          - service: automation.trigger
            data: {}
            target:
              entity_id: automation.oven_fan_air_quality
        default:
        - type: turn_off
          device_id: f844e99cd89ce7d7e2c6af31fa016cac
          entity_id: switch.oven_fan
          domain: switch
    - conditions:
      - condition: or
        conditions:
        - condition: trigger
          id: 'off'
        - condition: trigger
          id: buttonOff
      sequence:
      - type: turn_off
        device_id: f844e99cd89ce7d7e2c6af31fa016cac
        entity_id: switch.oven_fan
        domain: switch
      - service: esphome.tdisplayt4_goto_screen
        data:
          screen_name: nowPlaying
  mode: restart
- id: '1672432398857'
  alias: Door open notificatiob
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: f36fb888990eb4bcf83538ced292f38f
    entity_id: binary_sensor.contact_sensor_2_contact
    domain: binary_sensor
  - type: opened
    platform: device
    device_id: 8699750034b7dcbc5571e2e28571f6ad
    entity_id: binary_sensor.contact_sensor_contact
    domain: binary_sensor
  condition: []
  action:
  - service: notify.mobile_app_landorghini13
    data:
      title: Door open
  mode: single
- id: '1673328335958'
  alias: Fire Tablet Battery Management
  description: from blueprint
  use_blueprint:
    path: seamus65/wallpanel-battery-management.yaml
    input:
      battery: sensor.fire_tablet_battery
      charger: switch.tablet_charging_switch
      charged_percent: 70
- id: '1675377742219'
  alias: air quality history
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.particulate_matter_2_5um_concentration
  condition: []
  action:
  - service: input_select.set_options
    data:
      options: '{% set dataRange = 50 %} {% set dataCount = state_attr("input_select.air_quality_history",
        "options") | count %} {% set rangeMin = dataCount - dataRange %} {% set rangeMax
        = min(dataCount, dataRange + rangeMin) %} {% set data = namespace(numbers=[])
        %}{% for i in range(max(0, rangeMin + 1), rangeMax) %}{% set data.numbers
        = data.numbers + [state_attr("input_select.air_quality_history", "options")[i]]
        %}{% endfor %} {% set data.numbers = data.numbers + [states.sensor.particulate_matter_2_5um_concentration.state]
        %} {{ data.numbers }}

        '
    target:
      entity_id: input_select.air_quality_history
  mode: single
- id: '1675754569842'
  alias: Monitor the state of dishwasher
  description: ''
  use_blueprint:
    path: leofabri/appliance-status-monitor.yaml
    input:
      appliance_socket: switch.sonoff_10015d88b0
      appliance_power_sensor: sensor.sonoff_10015d88b0_power
      appliance_state_machine: input_select.dishwasher_state_machine
      appliance_job_cycle: input_boolean.dishwasher_job_cycle
      delayed_job_completion_timer: timer.dishwasher_delayed_job_completion_timer
      automation_self_trigger: input_boolean.dishwasher_automation_self_trigger
      actions_job_cycle_ends: []
      delayed_job_completion_duration: 420
- id: '1675755664609'
  alias: Monitor the state of washing machine
  description: ''
  use_blueprint:
    path: leofabri/appliance-status-monitor.yaml
    input:
      appliance_socket: switch.sonoff_10015d887b
      appliance_power_sensor: sensor.sonoff_10015d887b_power
      appliance_state_machine: input_select.washing_machine_state_machine
      appliance_job_cycle: input_boolean.washing_machine_job_cycle
      delayed_job_completion_timer: timer.washing_machine_delayed_job_completion_timer
      automation_self_trigger: input_boolean.washing_machine_automation_self_trigger
- id: '1676613352111'
  alias: pc display switcher
  description: ''
  trigger:
  - platform: state
    entity_id:
    - input_select.pc_display
    to: PC
    id: pc
  - platform: state
    entity_id:
    - input_select.pc_display
    to: TV
    id: tv
  - platform: state
    entity_id:
    - input_select.pc_display
    to: TVExtend
    id: tvExtend
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: pc
      sequence:
      - service: script.change_display_to_pc
        data: {}
    - conditions:
      - condition: trigger
        id: tv
      sequence:
      - service: script.change_display_to_tv
        data: {}
    - conditions:
      - condition: trigger
        id: tvExtend
      sequence:
      - service: script.change_display_to_tv_extend
        data: {}
    default:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_select.pc_display
          state: PC
        sequence:
        - service: script.change_display_to_pc
          data: {}
      - conditions:
        - condition: state
          entity_id: input_select.pc_display
          state: TV
        sequence:
        - service: script.change_display_to_tv
          data: {}
      - conditions:
        - condition: state
          entity_id: input_select.pc_display
          state: TVExtend
        sequence:
        - service: script.change_display_to_tv_extend
          data: {}
  mode: single
- id: '1677168786044'
  alias: tent light sun toggle
  description: turns tent light on and off based on sunrise
  trigger:
  - platform: time_pattern
    minutes: /15
  - platform: numeric_state
    entity_id: sensor.tent_light_on_today
    above: input_number.plant_light_hours
  - platform: numeric_state
    entity_id: sensor.ble_temperature
    above: input_number.plant_temp_shutoff
  - platform: numeric_state
    entity_id: sensor.ble_temperature
    below: input_number.plant_temp_shutoff
    id: cooled
  - platform: state
    entity_id:
    - input_number.plant_temp_shutoff
  condition: []
  action:
  - choose:
    - conditions:
      - condition: and
        conditions:
        - condition: time
          after: input_datetime.plant_on_time
        - condition: numeric_state
          entity_id: sensor.tent_light_on_today
          below: input_number.plant_light_hours
        - condition: numeric_state
          entity_id: sensor.ble_temperature
          below: input_number.plant_temp_shutoff
      sequence:
      - if:
        - condition: device
          type: is_off
          device_id: fb17b9b0dd032204928f0a6a88348f28
          entity_id: switch.ikea_power_outlet_2
          domain: switch
        then:
        - type: turn_on
          device_id: fb17b9b0dd032204928f0a6a88348f28
          entity_id: switch.ikea_power_outlet_2
          domain: switch
        - if:
          - condition: trigger
            id: cooled
          then:
          - service: notify.mobile_app_landorghini13
            data:
              message: light turned on
              title: Tent resuming from overheat
    - conditions:
      - condition: and
        conditions:
        - condition: time
          after: input_datetime.plant_on_time
        - condition: numeric_state
          entity_id: sensor.tent_light_on_today
          below: input_number.plant_light_hours
        - condition: numeric_state
          entity_id: sensor.ble_temperature
          above: input_number.plant_temp_shutoff
      sequence:
      - type: turn_off
        device_id: fb17b9b0dd032204928f0a6a88348f28
        entity_id: switch.ikea_power_outlet_2
        domain: switch
      - service: notify.mobile_app_landorghini13
        data:
          title: tent overheated
          message: turned off light
          data:
            push:
              interruption-level: critical
    default:
    - type: turn_off
      device_id: fb17b9b0dd032204928f0a6a88348f28
      entity_id: switch.ikea_power_outlet_2
      domain: switch
  - service: climate.turn_on
    data: {}
    target:
      entity_id: climate.ttgo_tent_pid_climate_controller
  - service: climate.set_temperature
    data:
      temperature: 26
    target:
      entity_id: climate.ttgo_tent_pid_climate_controller
  - service: climate.set_humidity
    data:
      humidity: 60
    target:
      entity_id: climate.ttgo_tent_pid_climate_controller
  mode: single
- id: '1677555134898'
  alias: PC Display Revert TV Off
  description: changes pc display back to monitor if tv is turned off or changes source
  trigger:
  - platform: state
    entity_id:
    - media_player.55_tcl_roku_tv
    attribute: source
    from: HDMIÂ 2
  - platform: device
    device_id: b2031546510b1ac0a601400cf695f550
    domain: media_player
    entity_id: media_player.55_tcl_roku_tv
    type: turned_off
  condition:
  - condition: and
    conditions:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.pc_display
        state: PC
  action:
  - service: script.change_display_to_pc
    data: {}
  mode: single
- id: '1678413538679'
  alias: Bathroom Motion Fountain
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.motion_sensor_occupancy
    id: motion
  - platform: state
    entity_id: timer.fountain_timer
    id: timer
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.motion_sensor_occupancy
        state: 'on'
      sequence:
      - type: turn_on
        device_id: 3a1df2c4b76763425057dfb9ade6f663
        entity_id: switch.ikea_power_switch
        domain: switch
      - choose:
        - conditions:
          - condition: and
            conditions:
            - condition: device
              device_id: 90e98d1ecee56bc8a850ac059eb531d3
              domain: media_player
              entity_id: media_player.beam
              type: is_playing
            - condition: state
              entity_id: media_player.beam
              attribute: media_content_type
              state: music
            - condition: not
              conditions:
              - condition: device
                device_id: 957d7ad9526a360f8ae9894d06373558
                domain: media_player
                entity_id: media_player.office_tts
                type: is_playing
          sequence:
          - service: media_player.join
            data:
              group_members:
              - media_player.office
            target:
              entity_id: media_player.beam
          - service: media_player.volume_set
            data:
              volume_level: 0.5
            target:
              entity_id: media_player.office
    - conditions:
      - condition: state
        entity_id: binary_sensor.motion_sensor_occupancy
        state: 'off'
      - condition: trigger
        id: timer
      sequence:
      - type: turn_off
        device_id: 3a1df2c4b76763425057dfb9ade6f663
        entity_id: switch.ikea_power_switch
        domain: switch
    default: []
  mode: single
- id: '1678548571432'
  alias: Desk Height Toggle
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: bb469a62ef86978fe07e9e4c7ef910e9
    type: action
    subtype: 'on'
    discovery_id: 0x84fd27fffeae4b28 action_on
  condition: []
  action:
  - service: script.set_desk_height
    data:
      height: toggle
  mode: single
- id: '1679889683243'
  alias: rgb light effect
  description: ''
  trigger:
  - platform: time_pattern
    seconds: /5
  condition: []
  action:
  - service: light.turn_on
    data:
      transition: 4.5
      hs_color: '({{ (((as_timestamp(now())) % (360 / states.input_number.rgb_effect_speed.state
        | float)) * states.input_number.rgb_effect_speed.state | float) | round(0)
        }}, 100)

        '
    target:
      entity_id: light.rgb_lights
  mode: queued
  max: 2
